<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <link rel="icon" href="http://cdn.static.123.com.cn/CloudStatic/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="http://cdn.static.123.com.cn/CloudStatic/favicon.ico" type="image/x-icon">
        <title></title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/bootstrap-reset.css" rel="stylesheet">
        <link href="css/font-awesome/css/font-awesome.css" rel="stylesheet" />
        <link rel="stylesheet" type="text/css" href="cloudui/css/cloudui.min.css"/>
        <link href="css/style-iframe.css" rel="stylesheet" type="text/css"/>
        <style type="text/css">
            html, body, .wrapper {height: 100%;overflow: hidden;}
        </style>
    </head>

    <body>
        <section class="wrapper">
            <div class="row">
                <div class="position">
                    <i class="fa fa-home"></i>
                    <div class="list"><a href="#">首页</a>&nbsp;&nbsp;/&nbsp;&nbsp;<span>管理员列表</span></div>
                </div>
            </div>
            <form id="listForm">
                <div class="row">
                    <div class="table-con">
                        <!--Begin:选项卡-->
                        <div class="table-tab clearfix">
                            <div class="pull-left tab-nav clearfix">
                                <a href="#">资讯列表</a>
                                <a href="#">资讯推荐</a>
                                <a class="active" href="#">草稿箱</a>
                                <a href="#">回收站</a>
                                <a href="#">发布日志</a>
                            </div>
                            <!--<button class="btn btn-success tab-btn">发布</button>-->
                        </div>
                        <!--End:选项卡-->
                        <!--Begin:功能按钮-->
                        <div class="table-btn clearfix tool-bar">
                            <button class="btn btn-success tab-btn mr14">发布</button>
                            <button type="button" class="btn btn-success mr14" id="add">添加</button>
                            <button type="button" class="btn mr14" disabled="disabled" id="edit">修改</button>
                            <button type="button" class="btn mr14" disabled="disabled" data-rel="http://www.baidu.com/" data-confirm="1">批量删除</button>
                            <div class="search pull-right">
                                <label><input type="checkbox" id="quick-search" />高级搜索</label>
                                <form method="get">
                                    <div class="search-con">
                                        <label class="fa fa-search"><input name="keywords" id="searchInput" type="text" placeholder="管理员账号/真实姓名搜索" /></label>
                                        <button type="button" class="btn btn-info"><!--<i class="fa fa-search"></i> -->搜索</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--End:功能按钮-->
                        <!--Begin:列表-->
                        <div class="table-padding">
                            <table class="table table-ash">
                                <thead>
                                    <tr>
                                        <th class="pl-18">
                                            <label><input type="checkbox" id="checkall" /></label>
                                        </th>
                                        <th>管理员账号</th>
                                        <th>真实姓名</th>
                                        <th>管理等级</th>
                                        <th>最后登陆时间</th>
                                        <th>最后登陆IP</th>
                                    </tr>
                                    <!-- 搜索条件 -->
                                    <tr class="quick-search dn">
                                        <td class="pl-18">--</td>
                                        <td><input name="username" type="text" placeholder="输入管理员账号搜索" /></td>
                                        <td><input type="text" placeholder="输入真实姓名搜索" /></td>
                                        <td>
                                            <select name="level">
                                                <option value="0">==管理等级==</option>
                                                <option value="1">等级一</option>
                                                <option value="1">等级一</option>
                                                <option value="1">等级一</option>
                                            </select>
                                        </td>
                                        <td>--</td>
                                        <td>--</td>
                                    </tr>
                                    <!-- 搜索条件 -->
                                </thead>
                                <tbody id="list">
                                    <!-- 循环开始 -->
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="1" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="2" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <tr>
                                        <td class="pl-18"><label><input name="id[]" value="3" type="checkbox" /></label></td>
                                        <td>video</td>
                                        <td>视频管理</td>
                                        <td>普通管理员</td>
                                        <td>2017-01-12 21:49:15</td>
                                        <td>61:190:32:52</td>
                                    </tr>
                                    <!-- 循环结束 -->
                                </tbody>
                            </table>
                        </div>
                        <!--End:列表-->
                        <!--Begin:分页-->
                        <div class="pages clearfix">
                            <div class="pages-left pull-left">
                                <p>共<span>54</span>条记录，每页<span>15</span>条,当前显示第 <span>2</span> 页/共<span>2</span>页</p>
                            </div>
                            <ul class="pagination pull-right">
                                <li><a href="#">«</a></li>
                                <li><a href="#">1</a></li>
                                <li><a href="#">2</a></li>
                                <li><a href="#">3</a></li>
                                <li><a href="#">4</a></li>
                                <li><a href="#">5</a></li>
                                <li><a href="#">»</a></li>
                            </ul>
                        </div>
                        <!--End:分页-->
                    </div>
                </div>
            </form>
            <!--Begin:底部-->
            <footer class="site-footer" style="margin-top: 20px">
                <div class="text-center">
                    版权所有 2017 www.123.com.cn
                    <a href="#" class="go-top">
                        <i class="fa fa-angle-up"></i>
                    </a>
                </div>
            </footer>
            <!--End:底部-->
        </section>
        <script src="js/jquery.js" type="text/javascript" charset="utf-8"></script>
        <script src="cloudui/js/core/cloudui.load.min.js" init="cloudui/js/core/cloudui.init.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(function () {
                if (window.clientHeight < 768)
                {
                    tableResize(20, 26);
                } else
                {
                    tableResize(15, 15);
                }
                $(window).resize(function () {
                    if (window.clientHeight < 768)
                    {
                        tableResize(20, 26);
                    } else
                    {
                        tableResize(15, 15);
                    }
                });
                /**
                 * 表格高度计算
                 * @param {type} margin1 iframe模块间距
                 * @param {type} margin2 table区块间距
                 * @returns {undefined}
                 */
                function tableResize(margin1, margin2) {
                    $('.table-con').height($('.wrapper').height() - otherHeight($('.table-con').parent().parent(), $('.wrapper')) - margin1 * ($('.wrapper').children().length - 1));
                    var tableHeight = $('.table-con').height() - otherHeight($('.table-padding'), $('.table-con')) - 12 - margin2 * ($('.table-con').children().length - 2); //26为模块间距

                    if ($('.table-padding table').height() > tableHeight)
                    {
                        $('.table-padding').height(tableHeight);
                    }
                }
                /**
                 *  计算除所需元素外的统计元素所占用高度
                 * @param {type} selector 所求高度元素对象
                 * @param {type} selectorWrap 所求元素外层元素
                 * @returns {Number}
                 */
                function otherHeight(selector, selectorWrap) {
                    var toolHeight = 0;
                    for (var i = 0; i < selectorWrap.children().length; i++)
                    {
                        if (i == selector.index())
                        {
                            toolHeight += 0;
                        } else
                        {
                            toolHeight += selectorWrap.children().eq(i).height();
                        }
                    }
                    return toolHeight;
                }
            });

            var module = {
                //加载表单
                form: {
                    'body': {}
                },
                //事件钩子
                event: [
                    'js/event.js'
                ],
                //插件钩子
                plugin: [
                    'jquery.md5.min'
                ],
                //回调
                callback: function () {
                    /*
                     var _re = /http:\/\/([^\?]+)/ig,
                     _r  = _re.exec(window.location);
                     _c  = $.md5(_r[0]);
                     if (cloudui.cookie(_c))
                     {
                     cloudui.checked($('#quick-search'));
                     $('.quick-search').show();
                     }
                     */
                    $('#add').click(function () {
                        parent.cloudui.window('add', {
                            url: 'form.html',
                            title: '首页 / 管理员列表 / 添加管理员',
                            width: '80%',
                            height: '80%',
                            btn: [
                                {
                                    txt: '推荐并关闭',
                                    action: function (obj) {
                                        _common(obj, 1);
                                    }
                                },
                                {
                                    txt: '推荐并继续',
                                    action: function (obj) {
                                        _common(obj, 2);
                                    }
                                },
                                {
                                    txt: '取消'
                                }
                            ],
                            btnPosition: 'center'
                        });
                    });
                }
            }
            function _common(obj, type)
            {
                //判断表单是否通过验证
                if (!obj.validate())
                {
                    return false;
                }
                var _parent = window.parent;
                //隐藏窗体
                obj.window.hide();
                //弹出confirm确认框
                _parent.cloudui.confirm('确定推荐吗？', function () {
                    //执行逻辑
                    $.ajax({
                        type: "post",
                        url: "http://www.test1.com",
                        data: obj.form,
                        dataType: 'jsonp',
                        success: function (data) {
                            if (data == 100)
                            {
                                _parent.cloudui.success('推荐成功！', function () {
                                    if (type == 1)
                                    {
                                        obj.window.remove();
                                        window.location.reload();
                                    } else
                                    {
                                        _parent.cloudui.shadeShow();
                                        obj.reload();
                                        obj.window.show();
                                    }
                                });
                            } else
                            {
                                _parent.cloudui.error('推荐失败！');
                            }
                        }
                    });
                }, function () {
                    obj.window.show();
                });
            }
        </script>
    </body>
</html>