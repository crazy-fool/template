var _menuBox,_CR="cloudui-rightmenu";$.extend({clouduiRightmenu:function(a,b,c){if(void 0==b.data||0==b.data.length)return!1;var d=c.replace("#","",c);d=d.replace(".","",d),a.mousedown(function(c){if(3!=c.which)return!1;if(0==$("#"+d+"-rightmenu").length){var e="";e+='<div class="'+_CR+'" id="'+d+'-rightmenu"><ul>',$.each(b.data,function(a,b){"-"==b.name?e+='<li class="'+_CR+'-line"></li>':(e+="<li ",""!=b.action&&void 0!=b.action&&(e+='data-action="'+b.action+'"'),e+=">",e+=b.name+"</li>")}),e+="</ul></div>",$("body").append(e),_menuBox=$("#"+d+"-rightmenu"),$(document).click(function(){_menuBox.find("li").removeClass("hover"),_menuBox.hide()}),_menuBox.mouseleave(function(){$(this).find("."+_CR+"-hover").removeClass(_CR+"-hover")}).find('li:not(".cloudui-rightmenu-line")').click(function(){var c=b.callback,d=$(this).data("action");void 0!=c&&$.isFunction(c)&&void 0!=d&&c(d,a)})}else _menuBox.is(":hidden")&&_menuBox.show();var f=c.clientX+$(document).scrollLeft(),g=c.clientY+$(document).scrollTop(),h=_menuBox.outerWidth()+5;_menuBox.outerHeight()+5;_innerW()-f<h?_menuBox.css("left",_innerW()-h):_menuBox.css("left",f),_menuBox.css({top:g})})}});