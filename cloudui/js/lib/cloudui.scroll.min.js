$.extend({clouduiScroll:function(a,b){function c(){j=4;var a=l[0].scrollHeight;a!=n&&(n=a,q.height(Math.ceil(m/n*m))),a>m&&o.is(":hidden")&&(o.fadeIn(100),d=setInterval(function(){j-=1,0==j&&(o.fadeOut(100),clearInterval(d))},1e3))}var d,f=!1,g=0,h=!1,i=!1,j=4,k="<style>";k+=".cloudui-scrollY{position:absolute;top:0;right:0;display:none;}",k+=".cloudui-scrollY-slide{position:absolute;top:0;right:0;}",k+="</style>",k+='<div class="cloudui-scrollY">',k+='<div class="cloudui-scrollY-slide">',k+="</div></div>","static"==a.css("position")&&a.css("position","relative");var l=a.children("div:first"),m=a.height(),n=l[0].scrollHeight;l.css({width:a.width(),height:m,overflow:"hidden",padding:0,margin:0}),a.append(k);var o=a.children(".cloudui-scrollY"),p=void 0==b.alpha||b.alpha>1?1:b.alpha;o.css("opacity",p);var q=o.children(".cloudui-scrollY-slide"),r=void 0==b.scrollWidth||b.scrollWidth<=0?6:b.scrollWidth,s=void 0==b.scrollBgcolor?"#F1F1F1":b.scrollBgcolor,t=void 0==b.slideBgcolor?"#C50205":b.slideBgcolor;q.width(r).css("background-color",t),o.width(r).css("background-color",s),o.height(m),q.height(Math.ceil(m/n*m)),a.bind("mouseenter",function(){c()}).bind("mouseleave",function(){f||(o.fadeOut(100),clearInterval(d))}),void 0!=b.alwaysBottom&&$.isFunction(b.alwaysBottom)?(b.alwaysBottom(l,function(){l.resize()}),g=m-q.height(),q.css("top",g),l.scrollTop(n).bind("resize",function(){n=$(this)[0].scrollHeight,q.height(Math.ceil(m/n*m)),g=m-q.height(),q.css("top",g),$(this).scrollTop(n)})):(g=0,o.css("top",g),l.scrollTop(g));var u=function(){return window.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:!!window.attachEvent&&function(a,b,c){a.attachEvent("on"+b,c)}}(),v=/firefox/.test(navigator.userAgent.toLowerCase())?"DOMMouseScroll":"mousewheel";u(l[0],v,function(a){if(n==m)return!1;_stopScroll(a),c(),e=window.event||a;var d=a.wheelDelta?a.wheelDelta/120:-a.detail/3,f=void 0==b.speed?10:b.speed;f>20&&(f=20),f<1&&(f=1),d>0&&!h?(i=!1,l.scrollTop()>0?(g+=-d*f,q.css("top",g<0?0:g),l.scrollTop(g*n/m)):(g=0,h=!0)):d<0&&!i&&(h=!1,l.scrollTop()+m<n?(g+=-d*f,q.css("top",g>m-q.height()?m-q.height():g),l.scrollTop(g*n/m)):(g=m-q.height(),i=!0,void 0!=b.bottomCallback&&$.isFunction(b.bottomCallback)&&b.bottomCallback(l)))}),q.mousedown(function(a){f=!0,_pageDisabled();var c,d=a.clientY,e=g;$(document).bind("mousemove",function(a){c=a.clientY,g=e+(c-d),g<0?(g=0,h=!0,dowm=!1):g>m-q.height()?(g=m-q.height(),h=!1,i=!0,void 0!=b.bottomCallback&&$.isFunction(b.bottomCallback)&&b.bottomCallback(l)):h=i=!1,q.css("top",g),l.scrollTop(g*n/m)}).bind("mouseup",function(){f=!1,_pageEnabled(),$(this).unbind("mousemove").unbind("mouseup")})})}});