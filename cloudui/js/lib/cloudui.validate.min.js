var _dataRule,_dataMsg,_dataTip,_obj,_errBorderColor="red";$.extend({clouduiValidate:function(a,b){void 0!=b.errBorderColor&&(_errBorderColor=b.errBorderColor),a.is("form")&&a.submit(function(){if(a.find("[data-validate-error]").length>0)return!1;$(this).find("[data-rule],[data-preg]").each(function(){_obj=$(this),$._CV_formValidate()});var c=a.find("[data-validate-error]").length;return void 0!=b.success?(0==c&&b.success(),!1):!(void 0!=b.submit&&!b.submit)&&0==c}),a.find("input[type='text'], textarea").blur(function(){_obj=$(this),$._CV_formValidate()}),a.find("input[type='checkbox'],input[type='radio']").click(function(){_obj=$("input[name='"+$(this).attr("name")+"']:first"),$._CV_formValidate()}),a.find("select, input[type='file']").change(function(){_obj=$(this),$._CV_formValidate()})},_CV_formValidate:function(){_dataRule=_obj.data("rule"),_dataMsg=_obj.data("msg"),_dataTip=void 0==_obj.data("tip")?"top":_obj.data("tip");var a=_obj.val(),b=_msgArr=[];if(void 0==_dataRule){var c=_obj.data("preg");if(void 0==c)return!1;$._CV_validate(c,a,_dataMsg)}else if(_dataRule.indexOf("|")!=-1){b=_dataRule.split("|"),_msgArr=_dataMsg.split("|");for(i in b)if(b[i].indexOf("len")!=-1){b[i]=b[i].replace("len=","");var d=b[i].split("-");if(a.length<d[0]||a.length>d[1])return $._CV_error(_msgArr[i]),!1;$._CV_success()}else if(b[i].indexOf("val")!=-1){b[i]=b[i].replace("val=","");var e=b[i].split("-");if(isNaN(parseInt(a))||parseInt(a)<e[0]||parseInt(a)>e[1])return $._CV_error(_msgArr[i]),!1;$._CV_success()}else if(b[i].indexOf("doc")!=-1){var f=a.toLowerCase().substr(a.lastIndexOf(".")+1),g=b[i].split("=");if(g[1].indexOf(f)==-1)return $._CV_error(_msgArr[i]),!1;$._CV_success()}else{var h=$._CV_validate(b[i],a,_msgArr[i]);if(!h)return h}}else if("checkbox"==_obj.attr("type")||"radio"==_obj.attr("type")){var j=_dataRule.split("="),k=j[1];k>0&&$("input[name='"+_obj.attr("name")+"']:checked").length<j[1]?$._CV_error(_dataMsg):$._CV_success()}else if(_obj.is("select")){var j=_dataRule.split("value!=");a==j[1]?$._CV_error(_dataMsg):$._CV_success()}else $._CV_validate(_dataRule,a,_dataMsg)},_CV_validate:function(a,b,c){var d=$._CV_preg(a),e=new RegExp("^"+d+"$");return e.test(b)?($._CV_success(),!0):($._CV_error(c),!1)},_CV_preg:function(a){var b=[];return b.require=".+",b.mobile="1[34578][\\d]{9}",b.phone="([\\d]{3,4}-)?[\\d]{7,8}",b.email="[\\w-\\.]+@[\\w-\\.]+(\\.\\w+)+",b.qq="[1-9][\\d]{4,9}",b.idcard="(^\\d{15}$)|(^\\d{17}(\\d|X|x)$)",b.url='(http://|https://)?[A-Za-z0-9]+\\.[A-Za-z0-9]+([/=?%-&_#@[]+!])*([^<>"])*',b.date="\\d{4}[/-]+\\d{2}[/-]+\\d{2}",b.money="\\d{1,}\\.\\d{2,4}",b.ip="\\d{1,}\\.\\d{1,}\\.\\d{1,}\\.\\d{1,}",b.number="[0-9]+",b.letter="[a-zA-Z]+",b.numberAndLetter="[0-9a-zA-Z]+",b.zipcode="[1-9][0-9]{5}",void 0==b[a]?a:b[a]},_CV_error:function(a){("text"==_obj.attr("type")||_obj.is("textarea"))&&_obj.css("border-color",_errBorderColor),_obj.attr("data-validate-error",1),cloudui.tips(_obj,a,_dataTip)},_CV_success:function(){("text"==_obj.attr("type")||_obj.is("textarea"))&&_obj.removeAttr("style"),_obj.removeAttr("data-validate-error"),cloudui.tipsHide(_obj)}});