var _CA="cloudui-autocomplete",_isFocus=!1;$.extend({clouduiAutocomplete:function(a,b,c){if(void 0==b.url||""==b.url)return!1;var d,e="",f=-1;$("body").on("focus",c,function(){if(0==$(this).next("."+_CA+"-result-box").length){var a=$(this).position();e='<div class="'+_CA+'-result-box" style="width:'+($(this).outerWidth()-2)+"px; left:"+a.left+'px;">',e+="<ul></ul>",e+="</div>",$(this).after(e)}return d=$(this).next("."+_CA+"-result-box"),""!=$(this).val()&&void(0==d.find("li").length?$._CA_data(b,d,$(this).val()):d.show())}).on("keyup",c,function(a){var c=a.keyCode;8==c&&""==$(this).val()||13==c?(f=-1,d.hide()):""!=$(this).val()&&((c>64&&c<91||8==c)&&(f=-1,$._CA_data(b,d,$(this).val())),_li=d.find("li"),38==c&&(f<0&&(f=_li.length-1),f-=1,$(this).val(_li.eq(f).html()),_li.removeClass(_CA+"-hover").eq(f).addClass(_CA+"-hover")),40==c&&(f>_li.length-2&&(f=-1),f+=1,$(this).val(_li.eq(f).html()),_li.removeClass(_CA+"-hover").eq(f).addClass(_CA+"-hover")))}).on("blur",c,function(){_isFocus||(f=-1,d.hide().find("li").removeClass(_CA+"-hover"))}).on("mouseenter","."+_CA+"-result-box",function(){_isFocus=!0}).on("mouseleave","."+_CA+"-result-box",function(){_isFocus=!1}).on("click","."+_CA+"-result-box ul li",function(){f=-1,d.find("li").removeClass("hover"),$(this).parent().parent().prev().val($(this).html()),d.hide()})},_CA_data:function(a,b,c){$.ajax({type:"post",url:a.url,data:{keywords:c},dataType:void 0==a.dataType?"json":a.dataType,success:function(a){if(0==a.length)return!1;b.show();var c="";$.each(a,function(a,b){c+="<li>"+b+"</li>"}),b.children("ul").html(c)}})}});